!function(){"use strict";var e=zs.laya.game.EventId;class a extends Laya.Script{constructor(){super()}onEnable(){super.onEnable(),this.goldLabel.text=zs.laya.game.AppMain.playerInfo.gold.toString(),Laya.stage.event(e.GAME_START)}onDisable(){super.onDisable()}onClick(){Math.round(10*Math.random())<5?Laya.stage.event(e.GAME_FAILED):Laya.stage.event(e.GAME_WIN)}}class t{static get ShaderName(){return"DyqqShader"}static initShader(){let e={a_Position:Laya.VertexMesh.MESH_POSITION0,a_Normal:Laya.VertexMesh.MESH_NORMAL0,a_Texcoord:Laya.VertexMesh.MESH_TEXTURECOORDINATE0},a={u_MvpMatrix:Laya.Shader3D.PERIOD_SPRITE,u_WorldMat:Laya.Shader3D.PERIOD_SPRITE,u_BaseTextureSrc:Laya.Shader3D.PERIOD_MATERIAL,u_BaseTextureDst:Laya.Shader3D.PERIOD_MATERIAL,u_alpha:Laya.Shader3D.PERIOD_MATERIAL},s=Laya.Shader3D.add(t.ShaderName),r=new Laya.SubShader(e,a);s.addSubShader(r),r.addShaderPass("\n            attribute vec4 a_Position;\n            uniform mat4 u_MvpMatrix;\n            uniform mat4 u_WorldMat;\n            attribute vec2 a_Texcoord;\n            attribute vec3 a_Normal;\n            varying vec3 v_Normal;\n            varying vec2 v_Texcoord;\n            void main()\n            {\n                gl_Position = u_MvpMatrix * a_Position;\n                mat3 worldMat=mat3(u_WorldMat);\n                v_Normal=worldMat*a_Normal;\n                v_Texcoord = a_Texcoord;\n            }","\n            #ifdef FSHIGHPRECISION\n                precision highp float;\n            #else\n                precision mediump float;\n            #endif\n            varying vec3 v_Normal;\n            varying vec2 v_Texcoord;\n            uniform sampler2D u_BaseTextureSrc;\n            uniform sampler2D u_BaseTextureDst;\n            uniform float u_alpha;\n            void main()\n            {\n                vec4 srcColor = texture2D(u_BaseTextureSrc,v_Texcoord);\n                vec4 desColor = texture2D(u_BaseTextureDst,v_Texcoord);\n                srcColor = srcColor * u_alpha;\n                float destAlpha = 1.0 - u_alpha;\n                desColor = desColor * destAlpha;\n                gl_FragColor=srcColor + desColor;\n            }")}}class s extends Laya.BaseMaterial{constructor(){super(),this.setShaderName(t.ShaderName)}get BaseTextureSrc(){return this._shaderValues.getTexture(s.u_BaseTextureSrc)}set BaseTextureSrc(e){e?this._defineDatas.add(s.u_BaseTextureSrc):this._defineDatas.remove(s.u_BaseTextureSrc),this._shaderValues.setTexture(s.u_BaseTextureSrc,e)}get BaseTextureDst(){return this._shaderValues.getTexture(s.u_BaseTextureDst)}set BaseTextureDst(e){e?this._defineDatas.add(s.u_BaseTextureDst):this._defineDatas.remove(s.u_BaseTextureDst),this._shaderValues.setTexture(s.u_BaseTextureDst,e)}get alpha(){return this._shaderValues.getNumber(s.u_alpha)}set alpha(e){this._shaderValues.setNumber(s.u_alpha,e)}}s.u_BaseTextureSrc=Laya.Shader3D.propertyNameToID("u_BaseTextureSrc"),s.u_BaseTextureDst=Laya.Shader3D.propertyNameToID("u_BaseTextureDst"),s.u_alpha=Laya.Shader3D.propertyNameToID("u_alpha");class r extends Laya.Script{constructor(){super(),this.totalTime=4e3,this.curTime=0}onEnable(){}onDisable(){}onStart(){var e=Laya.stage.addChildAt(new Laya.Scene3D,0),a=e.addChild(new Laya.Camera(0,.1,100));a.transform.translate(new Laya.Vector3(0,3,3)),a.transform.rotate(new Laya.Vector3(-30,0,0),!0,!1);var t=e.addChild(new Laya.DirectionLight);t.color=new Laya.Vector3(.6,.6,.6),t.transform.worldMatrix.setForward(new Laya.Vector3(1,-1,0));var r=e.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1,1,1)));r.transform.rotate(new Laya.Vector3(0,45,0),!1,!1);var o=new s;Laya.loader.load(["res/layabox.png","res/clip_replay_btn.png"],Laya.Handler.create(null,function(){o.BaseTextureSrc=Laya.loader.getRes("res/layabox.png"),o.BaseTextureDst=Laya.loader.getRes("res/clip_replay_btn.png"),o.alpha=.1})),r.meshRenderer.material=o,this.testMaterial=o}onUpdate(){if(null!=this.testMaterial){this.curTime+=Laya.timer.delta,this.curTime>this.totalTime&&(this.curTime-=this.totalTime);var e=this.curTime/this.totalTime;this.testMaterial.alpha=e<.5?2*e:1-2*(e-.5)}}}class o{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("compUI/GamePlayUI.ts",a),e("test/ShaderTest.ts",r)}}o.width=750,o.height=1334,o.scaleMode="fixedauto",o.screenMode="none",o.alignV="top",o.alignH="left",o.startScene="view/ad/FloatAd.scene",o.sceneRoot="",o.debug=!1,o.stat=!1,o.physicsDebug=!1,o.exportSceneToJson=!0,o.init();class n extends Laya.Script{constructor(){super()}onEnable(){}onDisable(){}wakeup(){}sleep(){}}var i=zs.laya.ObjectPool,l=zs.laya.game.EventId;class d extends zs.laya.game.AppMain{constructor(){super(),this.sceneLogic=null}onAwake(){super.onAwake(),Laya.stage.once(l.LAUNCH_COMPLETED,this,this.onGameLaunchReady),Laya.stage.on(l.UI_VIEW_CLOSED,this,this.onViewClosed),Laya.stage.on(l.UI_VIEW_OPENED,this,this.onViewOpened)}onDestroy(){this.sceneLogic=null,Laya.stage.off(l.UI_VIEW_CLOSED,this,this.onViewClosed),Laya.stage.off(l.UI_VIEW_OPENED,this,this.onViewOpened)}onGameLaunchReady(e){t.initShader(),i.ClearCache(),e?this.sceneLogic=Laya.stage.addChildAt(e,0).addComponent(n):Laya.stage.addComponent(r),Laya.stage.event(l.GAME_HOME)}onViewClosed(e){console.log(`${e} closed`)}onViewOpened(e){console.log(`${e} opened`)}}new class{constructor(){window.Laya3D?Laya3D.init(o.width,o.height):Laya.init(o.width,o.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.bgColor="#ffffff",Laya.stage.scaleMode=o.scaleMode,Laya.stage.screenMode=o.screenMode,Laya.URL.exportSceneToJson=o.exportSceneToJson,console.log("2"),(o.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),o.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),o.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.stage.addComponent(d)}}}();