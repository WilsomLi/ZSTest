window.zs=window.zs||{},window.zs.laya=window.zs.laya||{},function(e,t){"use strict";class s extends t.Script{constructor(){super(),this.loadingVal=null,this.loadingBar=null,this.loadingMask=null}onAwake(){this.loadingVal=this.owner.getChildByName("loadingVal"),this.loadingMask=this.owner.getChildByName("loadingMask"),this.loadingBar=this.loadingMask.getChildByName("loadingBar")}onEnable(){this.onLoadingUpdate(.01),t.stage.on(s.EVENT_UI_PROGRESS_UPDATE,this,this.onLoadingUpdate)}onDisable(){t.stage.off(s.EVENT_UI_PROGRESS_UPDATE,this,this.onLoadingUpdate)}onLoadingUpdate(e){this.loadingBar&&this.loadingMask&&(this.loadingMask.width=this.loadingBar.width*e),this.loadingVal&&(this.loadingVal.text=Math.floor(100*e)+"%")}}s.EVENT_UI_PROGRESS_UPDATE="UI_PROGRESS_UPDATE",t.ILaya.regClass(s),t.ClassUtils.regClass("zs.laya.ui.Loading",s),t.ClassUtils.regClass("zs.laya.ui.LoadingBar",s),t.ClassUtils.regClass("Zhise.LoadingBar",s);class a extends t.Script{constructor(){super(),this.callback=null,this.confirmBtn=null}initMsgBox(e){this.callback=e}onAwake(){this.confirmBtn=this.owner.getChildByName("confirmBtn")}onEnable(){this.confirmBtn.on(t.Event.CLICK,this,this.onClickConfirm)}onDisable(){this.confirmBtn.off(t.Event.CLICK,this,this.onClickConfirm)}onClickConfirm(){this.callback&&(this.callback.run(),this.callback=null)}}t.ILaya.regClass(a),t.ClassUtils.regClass("zs.laya.ui.MsgBox",a),t.ClassUtils.regClass("zs.laya.ui.MsgBoxComp",a),t.ClassUtils.regClass("Zhise.MsgBoxComp",a);class i extends t.Script{constructor(){super(),this.startGameData=null}onClick(){t.SoundManager.playSound(zs.laya.game.AppMain.appConfig.soundClick),zs.laya.game.WebService.startGame(this.startGameData||zs.laya.game.WebRequestArgs.reqStartGameArgs())}}t.ILaya.regClass(i),t.ClassUtils.regClass("zs.laya.ui.StartBtn",i),t.ClassUtils.regClass("Zhise.StartBtn",i);class n extends t.Script{constructor(){super()}onClick(){t.SoundManager.playSound(zs.laya.game.AppMain.appConfig.soundClick),zs.laya.game.UIService.showStore()}}t.ILaya.regClass(n),t.ClassUtils.regClass("zs.laya.ui.StoreBtn",n),t.ClassUtils.regClass("Zhise.StoreBtn",n);class o extends t.Script{constructor(){super(),this.statusClip=null}onAwake(){this.statusClip=this.owner}onEnable(){this.owner.mouseEnabled=!0,this.freshBtnState()}onClick(){t.SoundManager.playSound(zs.laya.game.AppMain.appConfig.soundClick),this.owner.mouseEnabled=!1,0==this.statusClip.index?zs.laya.sdk.SdkService.playVideo(t.Handler.create(this,function(){console.log("toRelive"),zs.laya.platform.ADConfig.updateVideoRevive(),this.relive(),console.log("toRelive2")}),t.Handler.create(this,function(){this.owner.mouseEnabled=!0}),t.Handler.create(this,function(){this.freshBtnState(),zs.laya.game.UIService.showToast("今日视频观看次数已用尽")})):1==this.statusClip.index?(t.stage.once(zs.laya.DeviceService.EVENT_ON_SHOW,this,function(e){Date.now()-e>3e3?(zs.laya.platform.ADConfig.updateShareRevive(),t.stage.event(zs.laya.game.EventId.GAME_RELIVE),this.relive()):(this.freshBtnState(),zs.laya.game.UIService.showToast("分享失败"))},[Date.now()]),zs.laya.sdk.SdkService.openShare(zs.laya.platform.ADConfig.zs_share_title,zs.laya.platform.ADConfig.zs_share_image)):2==this.statusClip.index?this.relive():this.onContinue()}freshBtnState(){this.owner.mouseEnabled=!0;var e=zs.laya.game.AppMain.appConfig.useWebAdApi;zs.laya.game.AppMain.ReliveChance<=0?this.statusClip.index=3:e&&zs.laya.platform.ADConfig.enableClickRevive()?this.statusClip.index=2:e&&zs.laya.platform.ADConfig.enableVideoRevive()&&zs.laya.sdk.SdkService.isVideoEnable()?this.statusClip.index=0:e&&zs.laya.platform.ADConfig.enableShareRevive()?this.statusClip.index=1:this.statusClip.index=2}relive(){t.stage.timerOnce(100,this,function(){t.stage.event(zs.laya.game.EventId.GAME_RELIVE),this.onRelive()})}onContinue(){}onRelive(){}}t.ILaya.regClass(o),t.ClassUtils.regClass("zs.laya.ui.ReplayBtn",o),t.ClassUtils.regClass("Zhise.ReplayBtn",o);class l extends o{constructor(){super(),this.endGameData=null}onContinue(){zs.laya.game.WebService.endGame(this.endGameData||zs.laya.game.WebRequestArgs.reqEndGameArgs())}}t.ILaya.regClass(l),t.ClassUtils.regClass("zs.laya.ui.ReplayNextHomeBtn",l),t.ClassUtils.regClass("Zhise.ReplayNextHomeBtn",l);class r extends t.Script{constructor(){super(),this.endGameData=null}onEnable(){this.owner.mouseEnabled=!0}onClick(){t.SoundManager.playSound(zs.laya.game.AppMain.appConfig.soundClick),this.owner.mouseEnabled=!1,zs.laya.game.WebService.endGame(this.endGameData||zs.laya.game.WebRequestArgs.reqEndGameArgs())}}t.ILaya.regClass(r),t.ClassUtils.regClass("zs.laya.ui.AwardBtn",r),t.ClassUtils.regClass("Zhise.AwardBtn",r);class h extends r{constructor(){super()}onClick(){t.SoundManager.playSound(zs.laya.game.AppMain.appConfig.soundClick),this.owner.mouseEnabled=!1,zs.laya.sdk.SdkService.playVideo(t.Handler.create(this,function(){zs.laya.game.WebService.endGame(this.endGameData||zs.laya.game.WebRequestArgs.reqEndGameArgs())}),t.Handler.create(this,function(){this.owner.mouseEnabled=!0}),t.Handler.create(this,function(){this.owner.mouseEnabled=!0,zs.laya.game.UIService.showToast("今日视频观看次数已用尽")}))}}t.ILaya.regClass(h),t.ClassUtils.regClass("zs.laya.ui.ExAwardBtn",h),t.ClassUtils.regClass("Zhise.ExAwardBtn",h);class d extends r{constructor(){super()}onClick(){zs.laya.game.AppMain.autoStartNext=!1,super.onClick()}}t.ILaya.regClass(d),t.ClassUtils.regClass("zs.laya.ui.Award2HomeBtn",d),t.ClassUtils.regClass("Zhise.Award2HomeBtn",d);class g extends r{constructor(){super()}onClick(){zs.laya.game.AppMain.autoStartNext=!0,super.onClick()}}t.ILaya.regClass(g),t.ClassUtils.regClass("zs.laya.ui.Award2NextBtn",g),t.ClassUtils.regClass("Zhise.Award2NextBtn",g);class C extends t.Script{constructor(){super(),this.curScore=null,this.maxScore=null}initScoreInfo(e,t){this.curScore&&null!=e&&(this.curScore.text=e.toString()),this.maxScore&&null!=t&&(this.maxScore.text=t.toString())}onAwake(){this.curScore=this.owner.getChildByName("curScore"),this.maxScore=this.owner.getChildByName("maxScore")}}t.ILaya.regClass(C),t.ClassUtils.regClass("zs.laya.ui.ScoreInfo",C),t.ClassUtils.regClass("Zhise.ScoreInfo",C);class p extends t.Script{constructor(){super(),this.running=!1,this.tickCount=null,this.tickCountMask=null,this.passedTime=0,this.waitingTime=5e3,this.newLeftTime=0,this.leftTime=0,this.endGameData=null}onAwake(){this.tickCount=this.owner.getChildByName("tickCount");var e=this.owner.getChildByName("tickProgress");e&&(this.tickCountMask=new t.Sprite,e.mask=this.tickCountMask),this.running=!0,this.passedTime=0,this.leftTime=this.newLeftTime=this.waitingTime=zs.laya.platform.ADConfig.zs_revive_countdown,this.waitingTime*=1e3,t.stage.on(zs.laya.game.EventId.APP_SHOW,this,this.onAppShow),t.stage.on(zs.laya.game.EventId.APP_HIDE,this,this.onAppHide)}onDestroy(){t.stage.off(zs.laya.game.EventId.APP_SHOW,this,this.onAppShow),t.stage.off(zs.laya.game.EventId.APP_HIDE,this,this.onAppHide)}onUpdate(){0!=this.running&&(this.passedTime+=t.timer.delta,this.passedTime>=this.waitingTime&&(this.running=!1,this.owner.event(p.EVENT_UI_TICK_COUNT_COMPLETE)),this.newLeftTime=Math.floor(.001*(this.waitingTime-this.passedTime)),this.tickCount.changeText(this.newLeftTime.toString()),this.newLeftTime!=this.leftTime&&(this.leftTime=this.newLeftTime,this.tickCountMask&&(this.tickCountMask.graphics.clear(!0),this.tickCountMask.graphics.drawPie(140,140,140,-90,1e3*this.leftTime/this.waitingTime*360-90,"#ff0000"))))}onAppShow(){this.running=!0}onAppHide(){this.running=!1}}p.EVENT_UI_TICK_COUNT_COMPLETE="UI_TICK_COUNT_COMPLETE",t.ILaya.regClass(p),t.ClassUtils.regClass("zs.laya.ui.TickCount",p),t.ClassUtils.regClass("Zhise.TickCount",p);class c extends zs.laya.base.ZhiSeView{constructor(){super()}onAwake(){super.onAwake(),this.owner.getChildByName("middleUI").getChildByName("loadingBar").addComponent(s)}}t.ILaya.regClass(c),t.ClassUtils.regClass("zs.laya.ui.LoadingView",c),t.ClassUtils.regClass("Zhise.LoadingView",c);class u extends zs.laya.base.ZhiSeView{constructor(){super()}onAwake(){super.onAwake();var e,t,s=this.owner.getChildByName("topUI");s&&(e=s.getChildByName("storeBtn"),t=s.getChildByName("startBtn"));var a=this.owner.getChildByName("middleUI");a&&(e=e||a.getChildByName("storeBtn"),t=t||a.getChildByName("startBtn"));var o=this.owner.getChildByName("bottomUI");o&&(e=e||o.getChildByName("storeBtn"),t=t||o.getChildByName("startBtn")),e&&e.addComponent(n),t&&t.addComponent(i)}}t.ILaya.regClass(u),t.ClassUtils.regClass("zs.laya.ui.HomeView",u),t.ClassUtils.regClass("Zhise.HomeView",u);class m extends zs.laya.base.ZhiSeView{constructor(){super(),this.replayBtn=null,this.jumpBtn=null,this.scoreLabel=null}initView(e){null!=e&&null!=e.score?(this.scoreLabel.parent.visible=!0,this.scoreLabel.text=e.score+""):this.scoreLabel.parent.visible=!1,this.replayBtn.getComponent(l).endGameData=e,this.jumpBtn.getComponent(r).endGameData=e}onAwake(){super.onAwake();var e=this.owner.getChildByName("topUI"),t=(this.owner.getChildByName("middleUI"),this.owner.getChildByName("bottomUI"));this.replayBtn=t.getChildByName("replayBtn"),this.jumpBtn=t.getChildByName("jumpByShareBtn"),this.scoreLabel=e.getChildByName("score").getChildByName("scoreLabel"),this.replayBtn.addComponent(l),this.jumpBtn.addComponent(r)}}t.ILaya.regClass(m),t.ClassUtils.regClass("zs.laya.ui.ReliveView",m),t.ClassUtils.regClass("Zhise.ReliveView",m);class y extends zs.laya.base.ZhiSeView{constructor(){super(),this.tickCountScore=null,this.overScore=null,this.jumpBtn=null,this.homeBtn=null,this.replayBtn=null}onAwake(){super.onAwake();var e=this.owner.getChildByName("middleUI"),t=this.owner.getChildByName("bottomUI");this.overScore=e.getChildByName("overScore"),this.tickCountScore=e.getChildByName("tickCountScore"),this.replayBtn=t.getChildByName("replayBtn"),this.jumpBtn=t.getChildByName("jumpBtn"),this.homeBtn=t.getChildByName("homeBtn"),this.homeBtn.visible=!1,this.overScore.visible=!1}initView(e){var s=e||{};this.overScore.addComponent(C).initScoreInfo(s.curScore,s.maxScore),this.tickCountScore.addComponent(C).initScoreInfo(s.curScore,s.maxScore),this.tickCountScore.once(p.EVENT_UI_TICK_COUNT_COMPLETE,this,this.onTickCountCompleted),this.replayBtn.addComponent(l),this.homeBtn.addComponent(d),this.jumpBtn.once(t.Event.CLICK,this,this.onTickCountCompleted),zs.laya.game.AppMain.autoStartNext=!1}onTickCountCompleted(){this.jumpBtn.visible=!1,this.homeBtn.visible=!0,this.replayBtn.index=3,this.tickCountScore.visible=!1,this.overScore.visible=!0}}t.ILaya.regClass(y),t.ClassUtils.regClass("zs.laya.ui.ReliveView2",y),t.ClassUtils.regClass("Zhise.ReliveView2",y);class B extends zs.laya.base.ZhiSeView{constructor(){super(),this.nextBtn=null,this.homeBtn=null,this.scoreLabel=null}initView(e){null!=e&&null!=e.score?this.scoreLabel&&(this.scoreLabel.parent.visible=!0,this.scoreLabel.text=e.score+""):this.scoreLabel&&(this.scoreLabel.parent.visible=!1),this.homeBtn.getComponent(d).endGameData=null,this.nextBtn.getComponent(g).endGameData=null}onAwake(){super.onAwake();this.owner.getChildByName("topUI");var e=this.owner.getChildByName("middleUI"),t=this.owner.getChildByName("bottomUI");this.homeBtn=t.getChildByName("homeBtn"),this.nextBtn=t.getChildByName("nextBtn"),this.homeBtn.addComponent(d),this.nextBtn.addComponent(g),e.getChildByName("score")&&(this.scoreLabel=e.getChildByName("score").getChildByName("scoreLabel"))}}t.ILaya.regClass(B),t.ClassUtils.regClass("zs.laya.ui.WinView",B),t.ClassUtils.regClass("Zhise.WinView",B);class f extends zs.laya.base.ZhiSeView{constructor(){super(),this.overScore=null,this.homeBtn=null,this.nextBtn=null}onAwake(){super.onAwake();var e=this.owner.getChildByName("middleUI"),t=this.owner.getChildByName("bottomUI");this.overScore=e.getChildByName("overScore"),this.nextBtn=t.getChildByName("nextBtn"),this.homeBtn=t.getChildByName("homeBtn"),this.homeBtn.visible=!0,this.overScore.visible=!0,this.homeBtn.addComponent(d),this.nextBtn.addComponent(g)}initView(e){var t=e||{};this.overScore.addComponent(C).initScoreInfo(t.curScore,t.maxScore),this.homeBtn.getComponent(d),this.nextBtn.getComponent(g)}}t.ILaya.regClass(f),t.ClassUtils.regClass("zs.laya.ui.WinView2",f),t.ClassUtils.regClass("Zhise.WinView2",f);class S extends zs.laya.base.ZhiSeView{constructor(){super(),this.callback=null,this.content=null,this.confirmBtn=null}initView(e){this.content.text=e.content,this.callback=e.callback}onAwake(){super.onAwake();var e=this.owner.getChildByName("middleUI");this.content=e.getChildByName("content"),this.confirmBtn=e.getChildByName("confirmBtn"),this.confirmBtn.on(t.Event.CLICK,this,this.onClickConfirm)}onDestroy(){this.confirmBtn.off(t.Event.CLICK,this,this.onClickConfirm)}onClickConfirm(){this.callback&&(this.callback.run(),this.callback=null),this.owner.close(),t.SoundManager.playSound(zs.laya.game.AppMain.appConfig.soundClick)}}t.ILaya.regClass(S),t.ClassUtils.regClass("zs.laya.ui.MsgBoxView",S),t.ClassUtils.regClass("Zhise.MsgBoxView",S);class w{constructor(){this.goodsPages=[]}}class I extends zs.laya.base.ZhiSeView{constructor(){super(),this.goldNum=null,this.closeBtn=null,this.typeTab=null,this.jumpTag=null,this.goodsList=null,this.unlockBtn=null,this.exchangeBtn=null,this.selectItemData=null,this.equipCd=!1,this.buyOrUseCd=!1,this.exchangeCoinCd=!1}onEnable(){t.stage.on(zs.laya.game.EventId.NET_XHR_RESPONSE,this,this.onNetXhrResponse)}onDisable(){t.stage.off(zs.laya.game.EventId.NET_XHR_RESPONSE,this,this.onNetXhrResponse)}onStart(){var e=this.owner.getChildByName("topUI");this.goldNum=e.getChildByName("goldNum"),this.closeBtn=e.getChildByName("closeBtn");var s=this.owner.getChildByName("middleUI");this.typeTab=s.getChildByName("typeTab"),this.goodsList=s.getChildByName("goodsList"),this.unlockBtn=s.getChildByName("unlockBtn"),this.exchangeBtn=s.getChildByName("exchangeBtn"),this.closeBtn.on(t.Event.CLICK,this,this.closeStore),this.unlockBtn.on(t.Event.CLICK,this,this.unlockItemByGold),this.exchangeBtn.on(t.Event.CLICK,this,this.exchangeCoin),this.exchangeBtn.gray=0==zs.laya.sdk.SdkService.isVideoEnable(),this.jumpTag=this.owner.getChildByName("jumpTag"),this.goldNum.text=zs.laya.game.AppMain.playerInfo.gold.toString(),this.typeTab.selectHandler=t.Handler.create(this,this.onSwitchType,null,!1),this.typeTab.selectedIndex=0,this.goodsList.renderHandler=t.Handler.create(this,this.onRenderItem,null,!1),this.goodsList.hScrollBarSkin="",I.requestStoreData(null)}onDestroy(){this.closeBtn.off(t.Event.CLICK,this,this.closeStore),this.unlockBtn.off(t.Event.CLICK,this,this.unlockItemByGold),this.exchangeBtn.off(t.Event.CLICK,this,this.exchangeCoin)}onNetXhrResponse(e,t,s,a){var i=zs.laya.game.AppMain;if(t==i.appConfig.storeCfg.webApi.RequestStoreData)this.onStoreDataReady(a.data);else if(t==i.appConfig.storeCfg.webApi.RequestEquipItem)this.onEquipedItem(a.data,s.goods_type,s.goods_id);else if(t==i.appConfig.storeCfg.webApi.UnlockGoodsByGold){if(0==e)return void(this.buyOrUseCd=!1);this.onBuyItemByGoldSuccess(a.data,s.goods_type,s.goods_id)}else if(t==i.appConfig.storeCfg.webApi.ExchangeCoin){if(this.exchangeCoinCd=!1,0==e)return;this.onExchangeCoinSuccess(a.data)}}onSwitchType(e){if(-1!=e){this.goodsList.repeatY=1;var s=this.storeContent[e].goodsPages,a=[];for(let e=Math.ceil(s.length/6);e>0;e--)a.push(e);this.goodsList.array=a;var i=zs.laya.game.AppMain.playerInfo.goods_ids[e].length-1,n=zs.laya.game.AppMain.storeCfg.shopPrice[e][i];n.price>0?(this.unlockBtn.gray=n.price>zs.laya.game.AppMain.playerInfo.gold,this.unlockBtn.getChildByName("label").text=n.price.toString()):(this.unlockBtn.gray=!0,this.unlockBtn.getChildByName("label").text=""),t.stage.event(I.EVENT_SWITCH_TAB,e)}}onSelectItem(e,s,a){this.equipCd||null!=e&&(zs.laya.game.AppMain.playerInfo.goods_id[e.goods_type]=e.goods_id,this.goodsList.setItem(s,Date.now()),t.stage.event(I.EVENT_SWITCH_ITEM,[e]),I.requestEquipItem({goods_type:e.goods_type,goods_id:e.goods_id}))}onRenderItem(e,t){var s=t*zs.laya.game.AppMain.appConfig.storeCfg.pageSize,a=this.storeContent[this.typeTab.selectedIndex].goodsPages,i=zs.laya.game.AppMain.playerInfo.goods_ids[this.typeTab.selectedIndex];for(let o=0;o<e.numChildren;o++,s++){const l=e.getChildAt(o);var n=s<a.length?a[s]:null;null!=n&&null!=i&&i.indexOf(n.goods_id)>=0?this.initGoodsItem(l,n,t,o):this.initGoodsItem(l,null,t,o)}}initGoodsItem(e,s,a,i){null==s?(e.getChildByName("bg").index=1,e.getChildByName("icon").visible=!1,e.off(t.Event.CLICK,this,this.onSelectItem)):(e.getChildByName("bg").index=s.goods_id==zs.laya.game.AppMain.playerInfo.goods_id[this.typeTab.selectedIndex]?2:0,e.getChildByName("icon").visible=!0,e.getChildByName("icon").skin=zs.laya.game.AppMain.appConfig.storeCfg.typeMap[s.goods_type]+"_"+s.goods_id.toString()+".png",e.off(t.Event.CLICK,this,this.onSelectItem),e.on(t.Event.CLICK,this,this.onSelectItem,[s,a,i]))}closeStore(){this.owner.close()}unlockItemByGold(){if(!this.buyOrUseCd){var e=zs.laya.game.AppMain.playerInfo.goods_ids[this.typeTab.selectedIndex],t=this.storeContent[this.typeTab.selectedIndex].goodsPages;if(e.length!=t.length){var s=[];for(let a=0;a<t.length;a++)-1==e.indexOf(t[a].goods_id)&&s.push(t[a]);var a=s[Math.floor(Math.random()*s.length)];this.buyOrUseCd=!0;var i=e.length-1,n=zs.laya.game.AppMain.storeCfg.shopPrice[this.typeTab.selectedIndex][i];I.requestUnlockGoodsByGold({goods_type:a.goods_type,goods_id:a.goods_id,gold:n.price})}}}exchangeCoin(){if(!this.exchangeCoinCd){this.exchangeCoinCd=!0;var e=this;zs.laya.sdk.SdkService.playVideo(t.Handler.create(null,function(){I.requestExchangeCoin({video_type:10,gold:zs.laya.game.AppMain.storeCfg.videoCoin})}),t.Handler.create(null,function(){e.exchangeCoinCd=!1}),t.Handler.create(null,function(){e.exchangeCoinCd=!1,e.exchangeBtn.gray=!0}))}}onStoreDataReady(e){this.storeContent={};for(let t=0;t<e.length;t++){const s=e[t];null==this.storeContent[s.goods_type]&&(this.storeContent[s.goods_type]=new w),this.storeContent[s.goods_type].goodsPages.push(s)}this.onSwitchType(this.typeTab.selectedIndex)}onEquipedItem(e,s,a){var i=this.storeContent[s].goodsPages;for(let e=0;e<i.length;e++)i[e].goods_id==a?i[e].status=2:2==i[e].status&&(i[e].status=1);t.stage.event(I.EVENT_ITEM_EQUIPED,[e]),this.onSwitchType(this.typeTab.selectedIndex)}onExchangeCoinSuccess(e){this.exchangeCoinCd=!1,zs.laya.game.AppMain.playerInfo.gold=e.gold,this.goldNum.text=zs.laya.game.AppMain.playerInfo.gold.toString()}onBuyItemByGoldSuccess(e,t,s){zs.laya.game.AppMain.playerInfo.goods_ids=e.goods_ids,zs.laya.game.AppMain.playerInfo.gold=e.gold,this.goldNum.text=zs.laya.game.AppMain.playerInfo.gold.toString();var a=this.storeContent[t].goodsPages.findIndex((e,t,a)=>e.goods_id==s),i=this.storeContent[t].goodsPages[a];i.status=1;var n=Math.floor(a/zs.laya.game.AppMain.appConfig.storeCfg.pageSize),o=a%zs.laya.game.AppMain.appConfig.storeCfg.pageSize;if(0!=zs.laya.game.AppMain.appConfig.storeCfg.randomEffect)this.playRandomUnlockEffect(i,n,o);else{this.buyOrUseCd=!1,this.onSwitchType(this.typeTab.selectedIndex),this.onSelectItem(i,n,o);var l=this;this.owner.frameOnce(2,this,function(){l.goodsList.scrollTo(n)})}}playRandomUnlockEffect(e,t,s){var a=this.goodsList.getCell(t),i=0,n=0;for(let e=0;e<a.numChildren;e++){0==a.getChildAt(e).getChildByName("icon").visible&&(i++,0==n&&(n=e-1))}if(1==i)this.buyOrUseCd=!1,this.onSwitchType(this.typeTab.selectedIndex),this.onSelectItem(e,t,s);else{this.equipCd=!0,this.typeTab.mouseEnabled=!1,this.closeBtn.mouseEnabled=!1;var o=Math.floor(2*zs.laya.game.AppMain.appConfig.storeCfg.pageSize/i)+1;this.owner.timerOnce(100,this,this.updateEffect,[e,t,s,o,n])}}updateEffect(e,t,s,a,i){var n=this.goodsList.getCell(t);for(let l=(i+1)%n.numChildren;l<n.numChildren;l++){var o=n.getChildAt(l);if(0==o.getChildByName("icon").visible){o.addChild(this.jumpTag),this.jumpTag.x=0,this.jumpTag.y=0,this.jumpTag.visible=!0,l==s?0==a?(this.buyOrUseCd=!1,this.equipCd=!1,this.typeTab.mouseEnabled=!0,this.closeBtn.mouseEnabled=!0,this.jumpTag.visible=!1,this.onSwitchType(this.typeTab.selectedIndex),this.onSelectItem(e,t,s)):this.owner.timerOnce(100,this,this.updateEffect,[e,t,s,a-1,l]):this.owner.timerOnce(100,this,this.updateEffect,[e,t,s,a,l]);break}}}static requestStoreData(e){var t=e||{},s=zs.laya.game.AppMain,a=zs.laya.game.WebService;t.userId=s.playerInfo.user_id,t.timestamp=Date.now(),a.RequestSign?zs.laya.XHRUtils.xhrPostWithSignAndHeader(s.appConfig.storeCfg.webApi.RequestStoreData,t,a.RequestSign,a.RequestHeader):zs.laya.XHRUtils.xhrPost(s.appConfig.storeCfg.webApi.RequestStoreData,t),console.log(s.appConfig.storeCfg.webApi.RequestStoreData)}static requestEquipItem(e){var t=e||{},s=zs.laya.game.AppMain,a=zs.laya.game.WebService;t.userId=s.playerInfo.user_id,t.timestamp=Date.now(),a.RequestSign?zs.laya.XHRUtils.xhrPostWithSignAndHeader(s.appConfig.storeCfg.webApi.RequestEquipItem,t,a.RequestSign,a.RequestHeader):zs.laya.XHRUtils.xhrPost(s.appConfig.storeCfg.webApi.RequestEquipItem,t),console.log(s.appConfig.storeCfg.webApi.RequestEquipItem)}static requestExchangeCoin(e){var t=e||{},s=zs.laya.game.AppMain,a=zs.laya.game.WebService;t.userId=s.playerInfo.user_id,t.timestamp=Date.now(),a.RequestSign?zs.laya.XHRUtils.xhrPostWithSignAndHeader(s.appConfig.storeCfg.webApi.ExchangeCoin,t,a.RequestSign,a.RequestHeader):zs.laya.XHRUtils.xhrPost(s.appConfig.storeCfg.webApi.ExchangeCoin,t),console.log(s.appConfig.storeCfg.webApi.ExchangeCoin)}static requestUnlockGoodsByGold(e){var t=e||{},s=zs.laya.game.AppMain,a=zs.laya.game.WebService;t.userId=s.playerInfo.user_id,t.timestamp=Date.now(),a.RequestSign?zs.laya.XHRUtils.xhrPostWithSignAndHeader(s.appConfig.storeCfg.webApi.UnlockGoodsByGold,t,a.RequestSign,a.RequestHeader):zs.laya.XHRUtils.xhrPost(s.appConfig.storeCfg.webApi.UnlockGoodsByGold,t),console.log(s.appConfig.storeCfg.webApi.UnlockGoodsByGold)}static requestUnlockGoodsByVideo(e){var t=e||{},s=zs.laya.game.AppMain,a=zs.laya.game.WebService;t.userId=s.playerInfo.user_id,t.timestamp=Date.now(),a.RequestSign?zs.laya.XHRUtils.xhrPostWithSignAndHeader(s.appConfig.storeCfg.webApi.UnlockGoodsByVideo,t,a.RequestSign,a.RequestHeader):zs.laya.XHRUtils.xhrPost(s.appConfig.storeCfg.webApi.UnlockGoodsByVideo,t),console.log(s.appConfig.storeCfg.webApi.UnlockGoodsByVideo)}}I.EVENT_SWITCH_TAB="STORE_SWITCH_TAB",I.EVENT_SWITCH_ITEM="STORE_SWITCH_ITEM",I.EVENT_ITEM_EQUIPED="STORE_ITEM_EQUIPED",t.ILaya.regClass(I),t.ClassUtils.regClass("zs.laya.ui.StorePage",I),t.ClassUtils.regClass("Zhise.StorePage",I),e.LoadingBar=s,e.MsgBoxComp=a,e.StartBtn=i,e.StoreBtn=n,e.ReplayBtn=o,e.ReplayNextHomeBtn=l,e.AwardBtn=r,e.ExAwardBtn=h,e.Award2HomeBtn=d,e.Award2NextBtn=g,e.TickCount=p,e.LoadingView=c,e.HomeView=u,e.ReliveView=m,e.ReliveView2=y,e.WinView=B,e.WinView2=f,e.MsgBoxView=S,e.StorePage=I}(window.zs.laya.ui=window.zs.laya.ui||{},Laya);